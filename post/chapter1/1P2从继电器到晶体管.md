# 计算机大脑里的电控开关：从继电器到晶体管

Hello World！我是老乔，欢迎来到超智星球。在这里，每篇都学一个小知识。

这期呢，还是计算机原理系列，上期最后讲到了自动制表机和IBM。本期接着讲计算机历史。

## 前言-内容概括

上文讲到20世纪初，当时的早期计算设备都针对特定用途，它们帮助，甚至代替了人工。比如，制表机大大推进了政府和企业的发展。

然而人类社会的规模，还在以前所未有的速度增长，对应的对于计算的需求不断增加。20世纪上半叶，世界人口几乎翻倍，一战动员7千万人，二战1亿多人，全球贸易和运输更加紧密，工程和科学的复杂度也达到新高 - 我们甚至开始考虑登陆其他行星。

数据量暴增、计算复杂度的增高，人们迫切的需要更自动化、更强的计算能力。很快，柜子大小的计算机就变成了房间大小。相比于惊天的笔记本电脑，可以称作是“巨无霸”计算机了。

而这些“巨无霸”，也是我们本期要讲的。虽然它们维护费用高，而且容易出错，但正是这些机器，为未来的创新打下基础。

本节内容：机械计算机到电子计算机
提到的器件：继电器 → 真空管 → 晶体管  
提到的设备：马克1号、巨人1号、阿尼阿克

本期知识点：
![](/media/15930098149767.jpg)

## 继电器计算机

二战前后，众多的数据计算，还是由人工计算机构来完成。不过在这期间，也出现过一些机电式的计算机。具有代表性的就是美国的哈佛马克一号。

喜欢看电影的朋友，可能会联想到，《钢铁侠》里，托尼·斯塔克的装甲。其命名便是由此而来。

![](/media/15914313386407.jpg)

我们这不是漫威宇宙，我们是计算机领域，这里的主角不是钢铁侠，而是霍华德·艾肯(Howard H.Aiken)

1900年，艾肯出生于美国新泽西州。中学毕业后进入威斯康星大学读书。大学毕业后，艾肯曾在西屋电气公司担任工程师。

1933年，已经步入社会的艾肯感到干电气这行是选错了专业，于是下决心辞掉了工作，重返校园学习物理，这时他已33岁。艾肯先进了芝加哥大学，但很快转至哈佛大学，1937年和1939年先后取得硕士和博士学位。

艾肯的博士论文课题是“空间电荷传导的理论”(Theory of Space Charge Conduction)。这一课题的研究需要对非线性微分方程进行复杂的计算，而艾肯手头只有手摇台式计算机可用，常常为解一个方程而耗费大量时间，这导致他产生了研制自动计算机的想法。

他向学校提出建议，学校的教授告诉他，实验室有台类似的计算装置。这引起了艾肯的极大兴趣。他看后发现，这是一台尚未完成的巴贝奇的分析机。【关于巴贝奇分析机，我们上一章有讲，不知道的同学，务必回去翻看】

在深入研究了巴贝奇工作的基础上，1937年艾肯提出了自动计算机的第一份建议书，即著名的文献“ProposedAutomatic Calculating Machine”。在这份长达22页、而且是双面打印的文件中，艾肯提出了他的设计目标，也就是后来被称为Mark I的计算机的四个特征：

1. 既能处理正数，也能处理负数。
2. 能解各类超越函数，如三角函数、对数函数、贝塞尔函数、概率函数等。
3. 全自动。即处理过程一旦开始，运算就完全自动进行，不需人的参与。
4. 在计算过程中，后续的计算取决于前一步计算所获得的结果。

造机器，也算是个大工程了，艾肯自己是穷学生，没钱的。艾肯原指望从学校取得经费支持来研制他的计算机，但没有如愿。幸而得到商学院布朗教授(Ted Brown)和天文系夏伯利教授(Harlow Shapley)的引荐，和**IBM公司的老板沃森**取得了联系。

当时，有远见的沃森正致力于将IBM公司从单纯制造办公设备的公司转变为制造计算机的公司，因此对艾肯的计划给予了全力支持，于1939年3月签订了合作制造该计算机的协议。

沃森把公司的多位主要技术骨干都投入了这一项目。经过艾肯和IBM公司长达5—6年的合作和努力(当然也包括难以避免的摩擦和碰撞)，Mark I终于在1944年5月完工，并与8月7日搬到哈佛大学。这部机器有51尺长，重5吨，由750,000部份合并而成，造价高达50万美元，其中IBM公司的投资占2/3，其余1/3由海军资助。

在捐赠仪式上，Aiken没有提到IBM对于设计与制造这部电脑的参与，这使沃森万分恼怒，从而中止了对艾肯和哈佛大学的一切支持，因此与Aiken分道扬镳。IBM将这部电脑命名为ASCC(Automatic Sequence Controlled Calculator-全自动化循序控制计算机)，但随后哈佛大学与Aiken将它改为马克一号。IBM之后去制造了另一部电脑SSEC。

在整体构成上，马克一号有72个累加器，每一个有自己的算术部件，及23位数的寄存器。其核心是71个循环寄存器(rotating register，把运算中暂时保存操作数的设备叫做register就始于Mark I)，每个可存放一个正或负的23bit的数字。数据和指令通过穿孔卡片机输入，输出则由电传打字机实现。

在核心元件上，这台机器的大脑是"继电器"(一种电磁的开关)。你可以把继电器控制线路，想成水龙头，打开水龙头，水会流出来，关闭水龙头，水就没有了。继电器是一样的，只不过控制的是电子，而不是水。这个控制电路可以连到其他电路，比如马达。马达让计数齿轮+1就像上集中Hollerith的制表机一样。

在程序部分，它借由打卡纸读取、执行每一道指令。它没有条件分支指令，这表示需要复杂运算的程式码会是很长一串。循环的完成需利用打卡纸头尾相接的方式。这种程式码与资料分开放置的架构就是众所周知的“哈佛架构”。计算机先驱Grace Hopper是马克一号的程式设计员。顺便一提，这台机器最早的用途之一，是给"曼哈顿计划"跑模拟。

不幸的是，继电器内的机械臂*有质量*，因此无法快速开关。1940年代一个好的继电器1秒能翻转50次，看起来好像很快，但还不够快，不足以解决复杂的大问题。马克一号的加法速度是300ms，乘法速度是6s，除法速度是11.4s，但计算一个对数或是一个三角函数需花费超过一分钟。即使在当时，这也算是慢的。

但马克一号的真正意义不在于速度。而在于它是一种完全自动化的计算机，而且它非常可靠，理论上可以7*24小时连轴转，这是初期的电子计算机无法比拟的。MarkI上只要19个小时就可以完成4个专家过去用3周时间才能完成的任务。

马克一号是第一部被实作出来的全自动电脑，大家认为“这是现代电脑时代的开端”以及“真正的电脑时代的曙光”。正因此，艾肯后来也被首批授予计算机先驱奖。

马克一号之后有马克二号(在1947年或是1948年)，马克三号/ADEC(1949年九月)以及哈佛马克四号(1952年)，全都是Aiken的工作成果。这些机器非常耐用，比如1947年6月的，舰艇主炮组的几门19型火炮齐发了19发，在震天动地的炮火声中，附近的MarkⅡ没有一个继电器误动作，炮轰对计算机的正常运行没有造成任何干扰。

但是呢，令人没想到的是，强悍的MarkII号，没有“外患”，却有“内忧”。

马克一号整体是机械的，除了速度慢，另一个限制是齿轮磨损，任何会动的机械都会随时间磨损。有些部件会完全损坏，有些则是变黏，变慢，变得不可靠。并且随着继电器数量增加，故障概率也会增加。哈佛马克一号，有大约3500个继电器，哪怕假设继电器的使用寿命是10年，也意味着平均每天得换一个故障继电器！这个问题很严重，因为有些重要运算要运行好几天。

而且还有更多其他问题要考虑————这些巨大、黑色、温暖的机器会吸引昆虫。1947年9月9日，葛丽丝·霍普(Grace Hopper)发现了第一个电脑上的bug。当在Mark II计算机上工作时，整个团队都搞不清楚为什么电脑不能正常运作了。经过大家的深度挖掘，发现原来是一只飞蛾意外飞入了一台电脑内部而引起的故障（如图所示）。这个团队把错误解除了，并在日记本中记录下了这一事件。

也因此，人们逐渐开始用“Bug”（原意为“虫子”）来称呼计算机中的隐错。

![](/media/15929256774354.jpg)


## 真空管计算机

继电器的机械设备有其缺陷存在，显然，如果想进一步提高计算能力我们需要更快更可靠的东西，来替代继电器。幸运的是，替代品已经存在了！

在1904年，英国物理学家"约翰·安布罗斯·弗莱明"开发了一种新的电子组件，叫"热电子管"，把两个电极装在一个气密的玻璃灯泡里-这是世上第一个真空管。

弗莱明的这个电子部件，电流只能单向流动，我们称为 "二极管"。但想要造计算机，仿照继电器的形式，我们需要一个能开关电流的东西。

幸运的是，不久之后在 1906 年，美国发明家"李·德富雷斯特"在"弗莱明"设计的两个电极之间，加入了第三个"控制"电极————向"控制"电极施加正电荷，它会允许电子流动；但如果施加负电荷，它会阻止电子流动。

因此通过控制线路，可以断开或闭合电路，和继电器的功能一样 - 但重要的是，真空管内没有会动的组件，这意味着更少的磨损；更重要的是，每秒可以开闭数千次(继电器50次)。这些"三极真空管"也成为了无线电，长途电话以及其他电子设备的基础，持续了接近半个世纪。

起初，真空管非常昂贵--收音机一般只用一个；但到了1940 年代，它的成本和可靠性得到改进，可以用在计算机里 至少有钱人负担得起，比如政府，这标志着计算机从机电转向电子。

第一个大规模使用真空管的计算机是"巨人1号"，由工程师Tommy Flowers设计，完工于1943年12月。巨人1号，放置于英国的"布莱切利园",用于破解纳粹通信，总共造了10台巨人计算机。

看过《模拟游戏》的朋友，听起来可能有点熟。在这2年前，阿兰·图灵——他经常被称为"计算机科学之父"。图灵也在"布莱切利园"做了台机电装置，叫"Bombe"这台机器的设计目的是，破解纳粹"英格码"通讯加密设备，但Bombe严格来说不算计算机，我们之后会讨论"阿兰·图灵"的贡献。

巨人1号，被认为是第一个可编程的电子计算机。编程的方法是把几百根电线插入插板，有点像老电话交换机，这是为了让计算机执行正确操作，虽然"可编程"，但配置它很繁琐。

几年后在1946年，电子数值积分计算机"ENIAC"(The Electronic Numerical Integrator and Calculator)，在"宾夕法尼亚大学"完成建造，设计者是 John Mauchly 和 J. Presper Eckert这是世上第一个真正的通用，可编程，电子计算机。

ENIAC 每秒可执行 5000 次十位数加减法 比前辈快了很多倍 它运作了十年 据估计，它完成的运算，比全人类加起来还多。

## 晶体管计算机

虽然真空管比起机械继电器是一次巨大进步，真空管不是完美的-它们有点脆弱，并且像灯泡一样会烧坏。因为真空管很多，所以故障很常见 ENIAC 运行半天左右就会出一次故障，到1950年代，真空管计算机都达到了极限。

为了降低成本和大小，同时提高可靠性和速度，我们需要一种新的电子开关。

1947 年，贝尔实验室科学家John Bardeen，Walter Brattain，William Shockley
发明了晶体管————一个全新的计算机时代诞生了！

晶体管的物理学相当复杂，牵扯到量子力学，所以我们只讲基础。
1. 晶体管就像之前提过的"继电器"或"真空管"-它是一个开关，可以用控制线路来控制开或关
2. 它有两个电极，电极之间有一种材料隔开它们，这种材料有时候导电，有时候不导电-这叫"半导体"
3. 控制线连到一个"门"电极，通过改变"门"的电荷，我们可以控制半导体材料的导电性，来允许或不允许电流流动-就像之前的水龙头比喻

贝尔实验室的第一个晶体管就展示了巨大的潜力——每秒可以开关10,000次。而且，比起玻璃制成，小心易碎的真空管，晶体管是固态的，可以远远小于继电器或真空管，这允许制造更小更便宜的计算机。如今，计算机里的晶体管小于50纳米-而一张纸的厚度大概是10万纳米。晶体管不仅小，还超级快-每秒可以切换上百万次，并且能工作几十年。

1957年，IBM发布了IBM608-第一个完全用晶体管，而且消费者也可以买到的计算机。其体积又变回了柜子大小。它有3000个晶体管，每秒执行4500次加法，每秒能执行80次左右的乘除法。IBM很快把所有产品都转向了晶体管，把晶体管计算机带入办公室，最终引入家庭。

很多晶体管和半导体的开发在"圣克拉拉谷"这个地方在加州，位于"旧金山"和"圣荷西"之间
而生产半导体最常见的材料是"硅"，所以这个地区被称为"硅谷"。

前面提到的晶体管发明者之一的William Shockley也搬了过去，创立了"肖克利半导体"，里面的员工后来成立了"仙童半导体"，这里面的员工后来创立了英特尔————当今世界上最大的计算机芯片制造商。

## 写在最后。

本文，我们介绍了计算机的核心计算零件，从继电器-电子管-晶体管的三个变化阶段。我们介绍了很多有趣的历史故事，并串联了一系列对计算机影响深远、放在今天也耳熟能详的名词。

但是呢，本文的关键知识点，还是计算机经历了继电器-电子管-晶体管的三个变化阶段。同时，这三代技术在本质上有一个相同点，那就是————它们都是可控制的开关。电子计算机计算，其背后的原理，就是控制这些开关的通电性，完成一系列的逻辑与算数运算。

下一节，我们讲一下，我们是如何通过控制这些开关，完成一个基础的运算逻辑的。

感谢关注，下期见。

参考文献：
1. 杨露斯, 黎炼. 论计算机发展史及展望[J]. 信息与电脑(理论版), 2010(06):194.
2. N.A.阿波京. 计算机发展史[M]. 11.
3. N.A.百度百科.哈佛马克一号.2018.
4. 别拿曾经看以后.《计算机发展历史》.新浪博客.2016 
5. CrashCourse/CrashCourse字幕组.《计算机科学速成课》.youtube.2018
6. 谌谦. 难以忘却的——计算机发展史[J]. 中国中医药现代远程教育, 2004(07):48-49.